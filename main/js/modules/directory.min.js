!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=65)}({0:function(e,t){e.exports=window.$},2:function(e,t,r){e.exports=function(){"use strict";var e=r(0);return function(t){"undefined"!=typeof CITY?e(t):(window.CITY_OPTIONS?window.CITY_OPTIONS.defer||(window.CITY_OPTIONS.defer=[]):window.CITY_OPTIONS={defer:[]},CITY_OPTIONS.defer.push(t))}}()},4:function(e,t,r){var n,o,s;/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(r,i){"object"==typeof t&&t&&"string"!=typeof t.nodeName?i(t):(o=[t],n=i,void 0!==(s="function"==typeof n?n.apply(t,o):n)&&(e.exports=s))}(0,function(e){function t(e){return"function"==typeof e}function r(e){return m(e)?"array":typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function s(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}function i(e,t){return g.call(e,t)}function a(e){return!i(v,e)}function u(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return w[e]})}function c(t,r){function o(e){if("string"==typeof e&&(e=e.split(_,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(n(e[0])+"\\s*"),i=new RegExp("\\s*"+n(e[1])),u=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var s,i,u,c=[],h=[],d=[],y=!1,g=!1;o(r||e.tags);for(var v,w,P,j,O,I,E=new f(t);!E.eos();){if(v=E.pos,P=E.scanUntil(s))for(var C=0,R=P.length;C<R;++C)j=P.charAt(C),a(j)?d.push(h.length):g=!0,h.push(["text",j,v,v+1]),v+=1,"\n"===j&&function(){if(y&&!g)for(;d.length;)delete h[d.pop()];else d=[];y=!1,g=!1}();if(!E.scan(s))break;if(y=!0,w=E.scan(T)||"name",E.scan(b),"="===w?(P=E.scanUntil(x),E.scan(x),E.scanUntil(i)):"{"===w?(P=E.scanUntil(u),E.scan(k),E.scanUntil(i),w="&"):P=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(O=[w,P,v,E.pos],h.push(O),"#"===w||"^"===w)c.push(O);else if("/"===w){if(!(I=c.pop()))throw new Error('Unopened section "'+P+'" at '+v);if(I[1]!==P)throw new Error('Unclosed section "'+I[1]+'" at '+v)}else"name"===w||"{"===w||"&"===w?g=!0:"="===w&&o(P)}if(I=c.pop())throw new Error('Unclosed section "'+I[1]+'" at '+E.pos);return p(l(h))}function l(e){for(var t,r,n=[],o=0,s=e.length;o<s;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}function p(e){for(var t,r,n=[],o=n,s=[],i=0,a=e.length;i<a;++i)switch(t=e[i],t[0]){case"#":case"^":o.push(t),s.push(t),o=t[4]=[];break;case"/":r=s.pop(),r[5]=t[2],o=s.length>0?s[s.length-1][4]:n;break;default:o.push(t)}return n}function f(e){this.string=e,this.tail=e,this.pos=0}function h(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function d(){this.cache={}}var y=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===y.call(e)},g=RegExp.prototype.test,v=/\S/,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,_=/\s+/,x=/\s*=/,k=/\s*\}/,T=/#|\^|\/|>|\{|&|=|!/;f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},f.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},h.prototype.push=function(e){return new h(e,this)},h.prototype.lookup=function(e){var r,n=this.cache;if(n.hasOwnProperty(e))r=n[e];else{for(var i,a,u,c=this,l=!1;c;){if(e.indexOf(".")>0)for(i=c.view,a=e.split("."),u=0;null!=i&&u<a.length;)u===a.length-1&&(l=o(i,a[u])||s(i,a[u])),i=i[a[u++]];else i=c.view[e],l=o(c.view,e);if(l){r=i;break}c=c.parent}n[e]=r}return t(r)&&(r=r.call(this.view)),r},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(t,r){var n=this.cache,o=t+":"+(r||e.tags).join(":"),s=n[o];return null==s&&(s=n[o]=c(t,r)),s},d.prototype.render=function(e,t,r,n){var o=this.parse(e,n),s=t instanceof h?t:new h(t);return this.renderTokens(o,s,r,e)},d.prototype.renderTokens=function(e,t,r,n){for(var o,s,i,a="",u=0,c=e.length;u<c;++u)i=void 0,o=e[u],s=o[0],"#"===s?i=this.renderSection(o,t,r,n):"^"===s?i=this.renderInverted(o,t,r,n):">"===s?i=this.renderPartial(o,t,r,n):"&"===s?i=this.unescapedValue(o,t):"name"===s?i=this.escapedValue(o,t):"text"===s&&(i=this.rawValue(o)),void 0!==i&&(a+=i);return a},d.prototype.renderSection=function(e,r,n,o){function s(e){return i.render(e,r,n)}var i=this,a="",u=r.lookup(e[1]);if(u){if(m(u))for(var c=0,l=u.length;c<l;++c)a+=this.renderTokens(e[4],r.push(u[c]),n,o);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)a+=this.renderTokens(e[4],r.push(u),n,o);else if(t(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");u=u.call(r.view,o.slice(e[3],e[5]),s),null!=u&&(a+=u)}else a+=this.renderTokens(e[4],r,n,o);return a}},d.prototype.renderInverted=function(e,t,r,n){var o=t.lookup(e[1]);if(!o||m(o)&&0===o.length)return this.renderTokens(e[4],t,r,n)},d.prototype.renderPartial=function(e,r,n){if(n){var o=t(n)?n(e[1]):n[e[1]];return null!=o?this.renderTokens(this.parse(o),r,n,o):void 0}},d.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},d.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);if(null!=n)return e.escape(n)},d.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="3.0.0",e.tags=["{{","}}"];var P=new d;return e.clearCache=function(){return P.clearCache()},e.parse=function(e,t){return P.parse(e,t)},e.render=function(e,t,n,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+r(e)+'" was given as the first argument for mustache#render(template, view, partials)');return P.render(e,t,n,o)},e.to_html=function(r,n,o,s){var i=e.render(r,n,o);if(!t(s))return i;s(i)},e.escape=u,e.Scanner=f,e.Context=h,e.Writer=d,e})},65:function(e,t,r){var n,o=r(4),s=r(2),i=$(".load-more"),a=i.attr("data-query"),u=i.attr("data-per-page"),c=$(".directory-users"),l=$(".directory-results-msg__displayed"),p=function(){n=i.attr("data-start-rank"),$.ajax({url:"https://www.city.ac.uk/api/search.html",dataType:"json",data:{collection:"user-directory",form:"json",sort:"metaf",start_rank:n,num_ranks:u,query:"*"+a+"*"},success:function(e){f(e)}})},f=function(e){numberResults=e.total,resultsPerPage=e.resultsPerPage,numberResultsCut=numberResults<resultsPerPage?numberResults:resultsPerPage,currentEnd=e.currEnd,totalDisplay=currentEnd+resultsPerPage,renderHTML="",newPath="",0!==numberResults&&(renderHTML=o.render('{{#users}}<li class="directory-user directory-user--loading" itemscope itemtype="http://schema.org/Person"><h4 class="directory-user__name" itemprop="name">{{{title}}} {{{firstName}}} {{{lastName}}}</h4><div class="row"><div class="col-xs-24 col-md-8">{{#job}}<span class="directory-user__info directory-user__info--job" itemprop="jobTitle">{{{job}}}</span>{{/job}}</div><div class="col-xs-24 col-md-8">{{#tel}}<span class="directory-user__info directory-user__info--tel" itemprop="telephone"><i class="fa fa-phone"></i><a href="tel:0044(0)207040{{tel}}">+44(0) 207 040 {{tel}}</a></span>{{/tel}}{{#email}}<span class="directory-user__info directory-user__info--email" itemprop="email"><i class="fa fa-envelope-o"></i><a href="mailto:{{{email}}}">{{{email}}}</a></span>{{/email}}</div><div class="col-xs-24 col-md-8">{{#room}}<span class="directory-user__info directory-user__info--room"><i class="fa fa-map-marker"></i>{{{room}}}</span>{{/room}}{{#dep}}<span class="directory-user__info directory-user__info--department"><i class="fa fa-building-o"></i>{{{dep}}}</span>{{/dep}}</div></div></li>{{/users}}',e)),h(renderHTML,currentEnd,numberResults)},h=function(e,t){c.children(".loading-fa-icon").remove(),c.append(e),i.attr("data-start-rank",parseInt(n)+10),l.html(t),t===numberResults&&i.remove()};s(function(){i.on("click",function(e){e.preventDefault(),c.append($('<i class="fa fa-refresh fa-spin loading-fa-icon"></i>')),p()})})}});