!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}({0:function(e,t,r){var n,o=r(55),s=r(53),i=$(".load-more"),a=i.attr("data-query"),u=i.attr("data-per-page"),c=$(".directory-users"),l="//www.city.ac.uk/fb/search.html",p=$(".directory-results-msg__displayed"),f=function(){n=i.attr("data-start-rank"),$.ajax({url:l,dataType:"json",data:{collection:"user-directory",form:"json",sort:"metaf",start_rank:n,num_ranks:u,query:"*"+a+"*"},success:function(e){d(e)}})},d=function(e){var t='{{#users}}<li class="directory-user directory-user--loading" itemscope itemtype="http://schema.org/Person"><h4 class="directory-user__name" itemprop="name">{{{title}}} {{{firstName}}} {{{lastName}}}</h4><div class="row"><div class="col-xs-24 col-md-8">{{#job}}<span class="directory-user__info directory-user__info--job" itemprop="jobTitle">{{{job}}}</span>{{/job}}</div><div class="col-xs-24 col-md-8">{{#tel}}<span class="directory-user__info directory-user__info--tel" itemprop="telephone"><i class="fa fa-phone"></i><a href="tel:0044(0)207040{{tel}}">+44(0) 207 040 {{tel}}</a></span>{{/tel}}{{#email}}<span class="directory-user__info directory-user__info--email" itemprop="email"><i class="fa fa-envelope-o"></i><a href="mailto:{{{email}}}">{{{email}}}</a></span>{{/email}}</div><div class="col-xs-24 col-md-8">{{#room}}<span class="directory-user__info directory-user__info--room"><i class="fa fa-map-marker"></i>{{{room}}}</span>{{/room}}{{#dep}}<span class="directory-user__info directory-user__info--department"><i class="fa fa-building-o"></i>{{{dep}}}</span>{{/dep}}</div></div></li>{{/users}}';numberResults=e.total,resultsPerPage=e.resultsPerPage,numberResultsCut=numberResults<resultsPerPage?numberResults:resultsPerPage,currentEnd=e.currEnd,totalDisplay=currentEnd+resultsPerPage,renderHTML="",newPath="",0!==numberResults&&(renderHTML=o.render(t,e)),h(renderHTML,currentEnd,numberResults)},h=function(e,t){c.children(".loading-fa-icon").remove(),c.append(e),i.attr("data-start-rank",parseInt(n)+10),p.html(t),t===numberResults&&i.remove()},v=function(){i.on("click",function(e){e.preventDefault(),c.append($('<i class="fa fa-refresh fa-spin loading-fa-icon"></i>')),f()})};s(v)},50:function(e,t){e.exports=window.$},53:function(e,t,r){e.exports=function(){"use strict";var e=r(50);return function(t){"undefined"!=typeof CITY?e(t):(window.CITY_OPTIONS?window.CITY_OPTIONS.defer||(window.CITY_OPTIONS.defer=[]):window.CITY_OPTIONS={defer:[]},CITY_OPTIONS.defer.push(t))}}()},55:function(e,t,r){var n,o,s;/*!
	 * mustache.js - Logic-less {{mustache}} templates with JavaScript
	 * http://github.com/janl/mustache.js
	 */
!function(r,i){"object"==typeof t&&t&&"string"!=typeof t.nodeName?i(t):(o=[t],n=i,s="function"==typeof n?n.apply(t,o):n,!(void 0!==s&&(e.exports=s)))}(this,function(e){function t(e){return"function"==typeof e}function r(e){return v(e)?"array":typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function s(e,t){return m.call(e,t)}function i(e){return!s(y,e)}function a(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return g[e]})}function u(t,r){function o(){if(y&&!g)for(;m.length;)delete h[m.pop()];else m=[];y=!1,g=!1}function s(e){if("string"==typeof e&&(e=e.split(_,2)),!v(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(n(e[0])+"\\s*"),u=new RegExp("\\s*"+n(e[1])),f=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var a,u,f,d=[],h=[],m=[],y=!1,g=!1;s(r||e.tags);for(var T,P,I,E,j,O,C=new p(t);!C.eos();){if(T=C.pos,I=C.scanUntil(a))for(var R=0,S=I.length;S>R;++R)E=I.charAt(R),i(E)?m.push(h.length):g=!0,h.push(["text",E,T,T+1]),T+=1,"\n"===E&&o();if(!C.scan(a))break;if(y=!0,P=C.scan(k)||"name",C.scan(w),"="===P?(I=C.scanUntil(b),C.scan(b),C.scanUntil(u)):"{"===P?(I=C.scanUntil(f),C.scan(x),C.scanUntil(u),P="&"):I=C.scanUntil(u),!C.scan(u))throw new Error("Unclosed tag at "+C.pos);if(j=[P,I,T,C.pos],h.push(j),"#"===P||"^"===P)d.push(j);else if("/"===P){if(O=d.pop(),!O)throw new Error('Unopened section "'+I+'" at '+T);if(O[1]!==I)throw new Error('Unclosed section "'+O[1]+'" at '+T)}else"name"===P||"{"===P||"&"===P?g=!0:"="===P&&s(I)}if(O=d.pop())throw new Error('Unclosed section "'+O[1]+'" at '+C.pos);return l(c(h))}function c(e){for(var t,r,n=[],o=0,s=e.length;s>o;++o)t=e[o],t&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}function l(e){for(var t,r,n=[],o=n,s=[],i=0,a=e.length;a>i;++i)switch(t=e[i],t[0]){case"#":case"^":o.push(t),s.push(t),o=t[4]=[];break;case"/":r=s.pop(),r[5]=t[2],o=s.length>0?s[s.length-1][4]:n;break;default:o.push(t)}return n}function p(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function d(){this.cache={}}var h=Object.prototype.toString,v=Array.isArray||function(e){return"[object Array]"===h.call(e)},m=RegExp.prototype.test,y=/\S/,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},w=/\s*/,_=/\s+/,b=/\s*=/,x=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;p.prototype.eos=function(){return""===this.tail},p.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},p.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var r,n=this.cache;if(n.hasOwnProperty(e))r=n[e];else{for(var s,i,a=this,u=!1;a;){if(e.indexOf(".")>0)for(r=a.view,s=e.split("."),i=0;null!=r&&i<s.length;)i===s.length-1&&(u=o(r,s[i])),r=r[s[i++]];else r=a.view[e],u=o(a.view,e);if(u)break;a=a.parent}n[e]=r}return t(r)&&(r=r.call(this.view)),r},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(e,t){var r=this.cache,n=r[e];return null==n&&(n=r[e]=u(e,t)),n},d.prototype.render=function(e,t,r){var n=this.parse(e),o=t instanceof f?t:new f(t);return this.renderTokens(n,o,r,e)},d.prototype.renderTokens=function(e,t,r,n){for(var o,s,i,a="",u=0,c=e.length;c>u;++u)i=void 0,o=e[u],s=o[0],"#"===s?i=this.renderSection(o,t,r,n):"^"===s?i=this.renderInverted(o,t,r,n):">"===s?i=this.renderPartial(o,t,r,n):"&"===s?i=this.unescapedValue(o,t):"name"===s?i=this.escapedValue(o,t):"text"===s&&(i=this.rawValue(o)),void 0!==i&&(a+=i);return a},d.prototype.renderSection=function(e,r,n,o){function s(e){return i.render(e,r,n)}var i=this,a="",u=r.lookup(e[1]);if(u){if(v(u))for(var c=0,l=u.length;l>c;++c)a+=this.renderTokens(e[4],r.push(u[c]),n,o);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)a+=this.renderTokens(e[4],r.push(u),n,o);else if(t(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");u=u.call(r.view,o.slice(e[3],e[5]),s),null!=u&&(a+=u)}else a+=this.renderTokens(e[4],r,n,o);return a}},d.prototype.renderInverted=function(e,t,r,n){var o=t.lookup(e[1]);return!o||v(o)&&0===o.length?this.renderTokens(e[4],t,r,n):void 0},d.prototype.renderPartial=function(e,r,n){if(n){var o=t(n)?n(e[1]):n[e[1]];return null!=o?this.renderTokens(this.parse(o),r,n,o):void 0}},d.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);return null!=r?r:void 0},d.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);return null!=n?e.escape(n):void 0},d.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var T=new d;e.clearCache=function(){return T.clearCache()},e.parse=function(e,t){return T.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+r(e)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(e,t,n)},e.to_html=function(r,n,o,s){var i=e.render(r,n,o);return t(s)?void s(i):i},e.escape=a,e.Scanner=p,e.Context=f,e.Writer=d})}});