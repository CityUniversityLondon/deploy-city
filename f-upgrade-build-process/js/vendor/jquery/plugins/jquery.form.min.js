!function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(a){if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var r=e.trim(this.attr("action"));r&&(r=(r.match(/^([^#]+)/)||[])[1]),r=r||window.location.href||"",a=e.extend(!0,{url:r,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);var n={};if(this.trigger("form-pre-serialize",[this,a,n]),n.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var i,o,s=this.formToArray(a.semantic);if(a.data)for(i in a.extraData=a.data,a.data)if(a.data[i]instanceof Array)for(var l in a.data[i])s.push({name:i,value:a.data[i][l]});else o=a.data[i],o=e.isFunction(o)?o():o,s.push({name:i,value:o});if(a.beforeSubmit&&!1===a.beforeSubmit(s,this,a))return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[s,this,a,n]),n.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var u=e.param(s);"GET"==a.type.toUpperCase()?(a.url+=(a.url.indexOf("?")>=0?"&":"?")+u,a.data=null):a.data=u;var c=this,f=[];if(a.resetForm&&f.push(function(){c.resetForm()}),a.clearForm&&f.push(function(){c.clearForm()}),!a.dataType&&a.target){var m=a.success||function(){};f.push(function(t){var r=a.replaceTarget?"replaceWith":"html";e(a.target)[r](t).each(m,arguments)})}else a.success&&f.push(a.success);a.success=function(e,t,r){for(var n=a.context||a,i=0,o=f.length;i<o;i++)f[i].apply(n,[e,t,r||c,c])};var d=e("input:file",this).length>0,p="multipart/form-data",h=c.attr("enctype")==p||c.attr("encoding")==p;return!1!==a.iframe&&(d||a.iframe||h)?a.closeKeepAlive?e.get(a.closeKeepAlive,v):v():e.ajax(a),this.trigger("form-submit-notify",[this,a]),this;function v(){var r=c[0];if(e(":input[name=submit],:input[id=submit]",r).length)alert('Error: Form elements must not have name or id of "submit".');else{var n=e.extend(!0,{},e.ajaxSettings,a);n.context=n.context||n;var i="jqFormIO"+(new Date).getTime(),o="_"+i;window[o]=function(){var e=s.data("form-plugin-onload");if(e){e(),window[o]=void 0;try{delete window[o]}catch(e){}}};var s=e('<iframe id="'+i+'" name="'+i+'" src="'+n.iframeSrc+'" onload="window[\'_\'+this.id]()" />'),l=s[0];s.css({position:"absolute",top:"-1000px",left:"-1000px"});var u={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1,s.attr("src",n.iframeSrc)}},f=n.global;if(f&&!e.active++&&e.event.trigger("ajaxStart"),f&&e.event.trigger("ajaxSend",[u,n]),n.beforeSend&&!1===n.beforeSend.call(n.context,u,n))n.global&&e.active--;else if(!u.aborted){var m=!1,d=0,p=r.clk;if(p){var h=p.name;h&&!p.disabled&&(n.extraData=n.extraData||{},n.extraData[h]=p.value,"image"==p.type&&(n.extraData[h+".x"]=r.clk_x,n.extraData[h+".y"]=r.clk_y))}n.forceSync?x():setTimeout(x,10);var v,g,b=50}}function x(){var t=c.attr("target"),a=c.attr("action");r.setAttribute("target",i),"POST"!=r.getAttribute("method")&&r.setAttribute("method","POST"),r.getAttribute("action")!=n.url&&r.setAttribute("action",n.url),n.skipEncodingOverride||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),n.timeout&&setTimeout(function(){d=!0,y()},n.timeout);var o=[];try{if(n.extraData)for(var l in n.extraData)o.push(e('<input type="hidden" name="'+l+'" value="'+n.extraData[l]+'" />').appendTo(r)[0]);s.appendTo("body"),s.data("form-plugin-onload",y),r.submit()}finally{r.setAttribute("action",a),t?r.setAttribute("target",t):c.removeAttr("target"),e(o).remove()}}function y(){if(!m){s.removeData("form-plugin-onload");var a=!0;try{if(d)throw"timeout";g=l.contentWindow?l.contentWindow.document:l.contentDocument?l.contentDocument:l.document;var r="xml"==n.dataType||g.XMLDocument||e.isXMLDoc(g);if(t("isXml="+r),!r&&window.opera&&(null==g.body||""==g.body.innerHTML)&&--b)return t("requeing onLoad callback, DOM not available"),void setTimeout(y,250);m=!0,u.responseText=g.documentElement?g.documentElement.innerHTML:null,u.responseXML=g.XMLDocument?g.XMLDocument:g,u.getResponseHeader=function(e){return{"content-type":n.dataType}[e]};var i=/(json|script)/.test(n.dataType);if(i||n.textarea){var o=g.getElementsByTagName("textarea")[0];if(o)u.responseText=o.value;else if(i){var c=g.getElementsByTagName("pre")[0],p=g.getElementsByTagName("body")[0];c?u.responseText=c.innerHTML:p&&(u.responseText=p.innerHTML)}}else"xml"!=n.dataType||u.responseXML||null==u.responseText||(u.responseXML=function(e,t){window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml");return t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null}(u.responseText));v=e.httpData(u,n.dataType)}catch(r){t("error caught:",r),a=!1,u.error=r,e.handleError(n,u,"error",r)}a&&(n.success.call(n.context,v,"success",u),f&&e.event.trigger("ajaxSuccess",[u,n])),f&&e.event.trigger("ajaxComplete",[u,n]),f&&!--e.active&&e.event.trigger("ajaxStop"),n.complete&&n.complete.call(n.context,u,a?"success":"error"),setTimeout(function(){s.removeData("form-plugin-onload"),s.remove(),u.responseXML=null},100)}}}},e.fn.ajaxForm=function(a){if(0===this.length){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(a)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(a))}).bind("click.form-plugin",function(t){var a=t.target,r=e(a);if(!r.is(":submit,input:image")){var n=r.closest(":submit");if(0==n.length)return;a=n[0]}var i=this;if(i.clk=a,"image"==a.type)if(null!=t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=r.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-a.offsetLeft,i.clk_y=t.pageY-a.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var a=[];if(0===this.length)return a;var r,n,i,o,s,l,u,c=this[0],f=t?c.getElementsByTagName("*"):c.elements;if(!f)return a;for(r=0,l=f.length;r<l;r++)if(i=(s=f[r]).name)if(t&&c.clk&&"image"==s.type)s.disabled||c.clk!=s||(a.push({name:i,value:e(s).val()}),a.push({name:i+".x",value:c.clk_x},{name:i+".y",value:c.clk_y}));else if((o=e.fieldValue(s,!0))&&o.constructor==Array)for(n=0,u=o.length;n<u;n++)a.push({name:i,value:o[n]});else null!=o&&a.push({name:i,value:o});if(!t&&c.clk){var m=e(c.clk),d=m[0];(i=d.name)&&!d.disabled&&"image"==d.type&&(a.push({name:i,value:m.val()}),a.push({name:i+".x",value:c.clk_x},{name:i+".y",value:c.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var a=[];return this.each(function(){var r=this.name;if(r){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;i<o;i++)a.push({name:r,value:n[i]});else null!=n&&a.push({name:this.name,value:n})}}),e.param(a)},e.fn.fieldValue=function(t){for(var a=[],r=0,n=this.length;r<n;r++){var i=this[r],o=e.fieldValue(i,t);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(a,o):a.push(o))}return a},e.fieldValue=function(t,a){var r=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!r||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(o<0)return null;for(var s=[],l=t.options,u="select-one"==n,c=u?o+1:l.length,f=u?o:0;f<c;f++){var m=l[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),u)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var a=this.type;if("checkbox"==a||"radio"==a)this.checked=t;else if("option"==this.tagName.toLowerCase()){var r=e(this).parent("select");t&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=t}})}}(jQuery);