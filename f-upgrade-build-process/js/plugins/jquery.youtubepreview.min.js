!function(t){var e=!1;t.fn.videoPreview=function(o){return function(o,a){o.not("[data-video-id-ready]").each(function(){var o=t(this).attr("data-video-id-ready",1),n=o.find(".youtube-preview"),u=o.attr("data-video-iframe-id"),r=n.children("a"),i=r.length>0?r:n,l=function(){var n,r="youku"==e&&o.attr("data-youku-id")?"youku":"youtube";"youtube"===r?(n="https://www.youtube.com/embed/"+o.attr("data-video-id")+"?rel=0&autoplay=1&wmode=transparent&controls="+a.controls+"&showinfo="+a.showInfo,a.autoPlay&&(n+="&enablejsapi=1&version=3")):(n="http://player.youku.com/embed/"+o.attr("data-youku-id"),a.autoPlay&&(n+="&autoplay=1"));var i=t("<iframe></iframe>").attr("id",u).attr("src",n).attr("frameborder",0);a.allowFullscreen&&i.attr("allowfullscreen",1),i.appendTo(o),a.callback&&a.callback(),"youtube"===r&&a.autoPlay&&"undefined"!=typeof YT&&new YT.Player(u,{events:{onReady:function(t){t.target.playVideo(),setTimeout(function(){i.focus()},100)}}})};i.bind("click",function(t){if(t.preventDefault(),i.unbind().click(function(t){t.preventDefault()}),!1===e){var o=new Image;o.onload=function(){e="youtube",l()},o.onerror=function(){e="youku",l()},o.src="http://youtube.com/favicon.ico"}else l()})})}(this,t.extend({autoPlay:!0,allowFullscreen:!1,controls:2,showInfo:1},o)),this}}(jQuery);