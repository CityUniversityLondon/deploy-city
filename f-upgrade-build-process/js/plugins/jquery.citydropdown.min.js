!function(a){var n=[],t=function(t){for(var e=0;e<n.length;e++)n[e].each(function(){var n=a(this);t&&1==t.length&&n.get(0)==t.get(0)||n.removeClass("active")})};a("body").click(function(){t(null)});var e=function(n,e){var o=n.find(".options > a");if(n.toggleClass("disabled",o.length<2),!n.data("dropdown-options").isMenu&&(o.click(function(){return i(n,a(this).attr("data-value")),t(n),!1}),e)){var d=n.find("input:hidden").val();void 0!==d&&s(n,d)}},i=function(a,n){s(a,n),function(a){for(var n=a.data("dropdown-options"),t=0;t<n.changeListeners.length;t++)n.changeListeners[t]()}(a),function(a,n,t,e,i){var s=function(a,n){var t=a.data("dropdown-options");return t?t[n]:null}(a,n);s&&s(t,e,i)}(a,"onselect",n)},s=function(a,n){var t=a.find('a[data-value="'+n+'"]');a.find("a.display span").html(t.html()),t.addClass("selected"),a.find('a[data-value!="'+n+'"]').removeClass("selected"),a.removeClass("active"),a.find("input:hidden").val(n)},o=function(n,t,i){var s=n.find(".options");s.empty();for(var o=null,d=0;d<t.length;d++){var l=t[d],r=l[0]==i;r&&(o=l),a('<a href="#"></a>').attr("data-value",l[0]).html(l[1]).toggleClass("selected",r).appendTo(s)}o&&n.find("a.display span").html(o[1]),e(n,!1)};a.fn.cityDropdown=function(i,d,l){if("string"==typeof i)switch(i){case"disable":case"enable":break;case"select":s(this,d);break;case"setOptions":o(this,d,l);break;case"value":return this.find(".options a.selected").attr("data-value");case"change":return r=d,void this.each(function(){var n=a(this),t=n.data("dropdown-options");t.changeListeners.push(r),n.data("dropdown-options",t)})}else!function(i,d){var l=a.extend({changeListeners:[],isMenu:!1},d);n.push(i),i.each(function(){var n=a(this);n.data("dropdown-options",l),n.find("a.display").click(function(){return n.toggleClass("active"),t(n),!1}),d&&d.values&&o(n,d.values),d&&d.initialValue&&s(n,d.initialValue),e(n,!0)})}(this,i);var r;return this}}(jQuery);