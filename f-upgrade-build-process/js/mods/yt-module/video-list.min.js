module.exports=function(){"use strict";var e=require("../libs/jquery"),i=require("mustache"),t=['<ul class="yt-videos-list">',"{{#.}}",'<li data-video-id="{{id}}" data-video-title="{{title}}" data-video-description="{{description}}" data-video-player="{{player}}" {{#views}}data-video-views="{{count}}"{{/views}} class="video event event-video {{activeClass}}">','<a href="http://www.youtube.com/embed/{{id}}" class="video-link">','<img src="{{thumbnail}}" />',"</a>",'<p class="video-title">','<a href="http://www.youtube.com/embed/{{id}}" class="video-link">{{title}}</a>',"</p>",'{{#views}}<p class="video-views"><span class="view-count">{{count}}</span> views</p>{{/views}}',"</li>","{{/.}}","</ul>"].join("\n"),a=function(i,a){return this.el=i,this.$el=e(i),this.tmpl=t,this.fv=a,this};return a.prototype.buildList=function(a,s){var d=this.fv,l=s.filter(function(e){return a?e.snippet.thumbnails&&e.snippet.thumbnails.high:e.video.thumbnail}).map(function(e,i){return a?{id:e.snippet.resourceId.videoId,title:e.snippet.title,description:e.snippet.description,views:!1,player:"https://www.youtube.com/embed/"+e.snippet.resourceId.videoId+"?rel=0",thumbnail:e.snippet.thumbnails.high.url,activeClass:0===i?"active":""}:{id:e.video.id,title:e.video.title,description:e.video.description,views:{count:e.video.viewCount},player:encodeURI(e.video.player.default),thumbnail:e.video.thumbnail.hqDefault,activeClass:0===i?"active":""}});l.length>0&&d.update(l[0]),this.$el.append(i.render(t,l)),this.$el.on("click",".video-link",function(i){var t=e(this),a=t.parents(".video"),s={};i.preventDefault(),s.title=a.data("video-title"),s.description=a.data("video-description"),s.views=!!a.data("video-views")&&{count:a.data("video-views")},s.src=t.attr("href"),s.id=a.data("video-id"),s.player=a.data("video-player"),e(".video-link").each(function(){e(this).parent(".video").removeClass("active")}),a.addClass("active"),d.update(s),e("html, body").animate({scrollTop:e("#yt-video-player").offset().top},500)}),this.$el.find("ul").bxSlider({slideWidth:200,minSlides:1,maxSlides:10,slideMargin:10,moveSlides:1,infiniteLoop:!1,nextText:'<i class="fa fa-caret-right"></i>',prevText:'<i class="fa fa-caret-left"></i>',touchEnabled:!0,preventDefaultSwipeY:!0,adaptiveHeight:!0,pager:!1,hideControlOnEnd:!0})},a}();