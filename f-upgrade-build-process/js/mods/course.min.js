var onResize=require("./utils/on-resize"),composeFunctions=require("../utils/compose-functions"),defer=require("./utils/defer"),charts=require("../utils/charts"),initAccordions=function(){$(".course__accordion").accordion({heightStyle:"content",collapsible:!0,active:!1,animate:!1,activate:function(e,t){$.isEmptyObject(t.newHeader.offset())||$("html:not(:animated), body:not(:animated)").animate({scrollTop:t.newHeader.offset().top},"slow")}})},initApplyDialog=function(){$('a[href="#apply-dialog"]').click(function(e){e.preventDefault(),$("#apply-dialog").dialog({modal:!0,autoOpen:!0,dialogClass:"apply-dialog",title:"How to Apply",width:"60%",height:500,draggable:!1,resizable:!1})})},initEntries=function(){$(".course__entries select").change(function(e){location.href=$(this).find("option:selected").attr("data-url")})},initTestimonials=function(){var e=$(".course__profiles").width(),t=$(".course__profiles__item").length;if(t>0){var i=e/t,n=t>1,o=Math.max(300,i);Math.max(1,Math.floor(e/o));$(".course__profiles .items").bxSlider({pager:!1,controls:n,nextText:'<i class="fa fa-chevron-right"></i>',prevText:'<i class="fa fa-chevron-left"></i>',adaptiveHeight:!0,slideMargin:0,touchEnabled:!1})}},testimonialsBackgroundColor=function(){var e=$('li.course__profiles__item:not([aria-hidden*="true"]) .course__profiles__item__text__title').css("color");$(".course__testimonials__wrapper").css("background",e)},initAssessment=function(){var e=document.getElementById("course-assessment-chart");if(e){var t=new google.visualization.DataTable,i={chartArea:{top:10,bottom:30,width:300,height:300},animation:{duration:1e3,startup:!0},tooltip:{text:"percentage"},title:"Assessment",pieHole:.5,colors:["#253e52","#3f1561","#e3a02d","#3986ac"]},n=new google.visualization.PieChart(e);return t.addColumn("string","Type"),t.addColumn("number","%"),$(".course__assessment__list li").each(function(){var e=$(this);t.addRow([e.attr("data-label"),parseFloat(e.attr("data-value"))])}),function(){n.draw(t,i)}}return!1},initMenu=function(){var e=$(".course__menu"),t=e.find(".course__menu__title a"),i=e.find(".course__menu__content");t.click(function(e){e.preventDefault(),$(this).text(function(e,t){return"Hide"==t?"Show":"Hide"}),i.slideToggle()})},initEmployment=function(){var e=$(".course__employment");if(e.length){var t=(e.attr("data-values")||e.attr("data-value")+";0;0").split(";").map(function(e){return parseFloat(e||"0")}),i=t.reduce(function(e,t){return e+t}),n=Math.max(0,100-i),o=new google.visualization.DataTable,a={backgroundColor:"transparent",height:"100%",chartArea:{backgroundColor:"transparent",top:"5%",height:"90%",width:"90%"},animation:{duration:1e3,startup:!0},legend:"none",pieSliceText:"none",tooltip:{text:"percentage"},pieHole:.85,slices:{0:{color:"#a22833"},1:{color:"#db6363"},2:{color:"#d99898"},3:{color:"#d9d9d9"}}},r=new google.visualization.PieChart(document.getElementById("course-destinations-employment-chart"));return o.addColumn("string","Type"),o.addColumn("number","%"),o.addRow(["In employment",t[0]]),o.addRow(["Work and study",t[1]]),o.addRow(["Further study",t[2]]),o.addRow(["Unemployed",n]),function(){r.draw(o,a)}}return!1},initDestinations=function(){return initEmployment()},initCharts=function(){charts.onInit(function(){onResize(composeFunctions(initAssessment(),initDestinations()),!0)})},initReadMore=function(){$(window).width()<600&&$(".course__white-box").each(function(){var e=$(this),t=e.find(".course__white-box__content");if(t.height()>100){t.addClass("course__white-box__content--read-more");var i=$('<div class="course__white-box__read-more"><div class="course__white-box__read-more__bg"></div><a  href="#"><span>read more</span></a></div>').click(function(e){t.removeClass("course__white-box__content--read-more"),i.remove(),e.preventDefault()}).appendTo(e)}})},initKisWidget=function(){var e=$("#unistats-widget-frame");if(e.length>0){var t=$(".course__kis");onResize(function(){var i=e.attr("src"),n=i.indexOf("horizontal")>=0,o=$(window).width()>635;if(n!==o){var a=o?i.replace(/vertical/,"horizontal"):i.replace(/horizontal/,"vertical"),r=o?{width:"615px",height:"150px"}:{width:"190px",height:"500px"};e.attr("src",a),e.css(r),t.toggleClass("course__kis--vertical",!o)}},!0)}},init=function(){initKisWidget(),initAccordions(),initEntries(),initTestimonials(),initCharts(),initReadMore(),initApplyDialog(),initMenu(),testimonialsBackgroundColor()};defer(init),$(".course__testimonials__wrapper").click(function(){testimonialsBackgroundColor()});