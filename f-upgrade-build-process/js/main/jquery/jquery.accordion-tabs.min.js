module.exports=function(t){require("../../utils/scroll-to");var e=function(t,e){if(t.find(">.tab-panel.default").removeClass("default"),t.find(">ul .selected, >.tab-panel.selected").removeClass("selected"),e){var a="#"+e;t.find('>ul a[href="'+a+'"]').addClass("selected"),t.find(a).addClass("selected")}else t.find(">ul li").first().find("a").addClass("selected"),t.find(">.tab-panel").first().addClass("default")};t.fn.accordionTabs=function(a){var n,i,l;return n=this,i=t(window),l={},n.each(function(){var a=t(this),n=a.find(">div >.content-panel"),i=a.attr("id")||"tab",s=function(l){var s=(l.attr("href")||"").match(/^#(.+)$/),o=l.parent("h2");if(s){var r={},c=!(l.parent("li").length>0)&&l.closest(".tab-panel").hasClass("selected"),d=l.closest(".tab-panel").find(".panel-content");r[i]=c?null:s[1],e(a,r[i]||!1),t.isEmptyObject(o.offset())||t("html:not(:animated), body:not(:animated)").animate({scrollTop:o.offset().top},"slow"),n.removeAttr("tabindex"),l.parent().hasClass("accordion-toogle")?(d.attr("tabindex","0"),d.focus()):l.focus(),t.bbq.pushState(r)}};t('a[href^="#'+i+'="]').each(function(){var e=t(this);e.attr("href").match(/#([a-zA-Z0-9]+)=[a-zA-Z0-9]+/)&&e.click(function(){t("html, body").animate({scrollTop:t("#"+i).offset().top},200)})}),l[i]=a,a.find(">ul a, >.tab-panel >.accordion-toogle a").click(function(e){s(t(this)),e.preventDefault()}).keydown(function(e){37===e.which?s(t(this).parent().prev().children("a")):39===e.which&&s(t(this).parent().next().children("a"))})}),i.on("hashchange",function(){var a=t.bbq.getState();for(var n in l)l.hasOwnProperty(n)&&e(l[n],a[n]||!1)}),i.trigger("hashchange"),this}};