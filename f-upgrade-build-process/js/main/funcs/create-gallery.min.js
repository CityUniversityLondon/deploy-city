module.exports=function(){var a=require("../jquery"),i=require("../../utils/debug"),l="not-loaded",e=[],n=function(i,l){var e=i.attr("id").replace("gallery-",""),n=i.find(".gallery-inner");return a.getJSON("/apis/galleries/galleria-json?root="+e,function(a){i.find("span.loading").hide(),i.css("opacity","1"),l.data_source=a,n.galleria(l)}),n},t=function(){l="loaded";for(var a=0;a<e.length;a++)n(e[a].gallery,e[a].options);e=[]};return function(r){var s=r&&r.find(".gallery-inner");if(s&&0!==s.length){var o={height:.5625,lightbox:s.hasClass("lightbox"),maxScaleRatio:1,preload:2,showInfo:s.hasClass("caption"),imageCrop:!1,debug:!1,extend:function(){"city"===r.attr("data-theme")&&(r.prepend(a("<div/>",{class:"cg-caption"})),this.bind("loadstart",function(a){var i=this._data[a.index],l=r.find(".cg-caption");i.m_caption?l.html(i.m_caption):l.html("&nbsp;")}))}};"loaded"===l?n(r,o):("not-loaded"===l&&(l="loading",a.getMultiJsScripts(["lib/jquery/plugins/galleria/galleria-1.4.2/galleria-1.4.2.min.js","lib/jquery/plugins/galleria/galleria-1.4.2/themes/classic/galleria.classic.city.min.js"],t,!0)),r.prepend(a('<div class="loading"><div class="loading__icon"><i class="fa fa-refresh fa-spin"></i></div></span>')),e.push({gallery:r,options:o}))}else i("no gallery found")}}();