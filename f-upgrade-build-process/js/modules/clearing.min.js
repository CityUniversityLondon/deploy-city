function ResponsiveDatatablesHelper(e,t){this.tableElement="string"==typeof e?$(e):e,this.columnIndexes=[],this.columnsShownIndexes=[],this.columnsHiddenIndexes=[],this.expandColumn=void 0,this.breakpoints={},this.expandIconTemplate='<span class="responsiveExpander"></span>',this.rowTemplate='<tr class="row-detail"><td><ul class="course-extra">\x3c!--column item--\x3e</ul></td></tr>',this.rowLiTemplate='<li><span class="columnTitle">\x3c!--column title--\x3e</span><span>: </span>\x3c!--column value--\x3e</li>',this.disabled=!1,this.skipNextWindowsWidthChange=!1,this.init(t)}CITY.clearingTimeline=function(){var e,t={tablet:1024,phone:480},n=!!$("html").hasClass("lt-ie9"),r=$("#clearing-courses");r.length&&yepnope({load:"//s1.city.ac.uk/cityr/js/lib/jquery/plugins/dataTables/jquery.dataTables.min.js",complete:function(){r.dataTable({bPaginate:!1,sAjaxSource:"//webapps.city.ac.uk/clearing/course/all",sAjaxDataProp:"courses",bAutoWidth:!1,aoColumns:[{mData:"title",mRender:function(e,t,n){return'<span class="course-link"><a href="'+n.url+'">'+e+"</span></a>"}},{mData:"ucasCode",mRender:function(e,t,n){return'<span class="course-ucas"><a href="'+n.url+'">'+e+"</span></a>"}},{aTargets:[1],mData:function(e){return e.keywords=e.keywords.replace(/,/g,", "),'<span class="course-keywords"><a href="'+e.url+'">'+e.keywords+"</span></a>"}},{mData:"vacancyStatusExternal",mRender:function(e,t,n){return'<span class="course-vacancy-status"><a href="'+n.url+'">'+(!0===e?"Yes":"No")+"</span></a>"}}],fnPreDrawCallback:function(){n||e||(e=new ResponsiveDatatablesHelper(r,t))},fnRowCallback:function(t){n||e.createExpandIcon(t)},fnDrawCallback:function(){n||e.respond()},fnInitComplete:function(){var e;void 0===e?e=$(r.fnGetNodes()):"string"===e&&(e=$(e,r.fnGetNodes()))},fnCreatedRow:function(e,t,n){!0===t.vacancyStatusExternal&&(e.className=e.className+"places")},fnServerData:function(e,t,n,r){r.jqXHR=$.ajax({url:e,data:t,success:n,dataType:"jsonp",cache:!1})}})}})}(CITY.debug),ResponsiveDatatablesHelper.prototype.init=function(e){var t,n,r,a=[];_.each(e,function(e,t){a.push({name:t,upperLimit:e,columnsToHide:[]})}),a=_.sortBy(a,"upperLimit"),t=void 0,_.each(a,function(e){e.lowerLimit=t,t=e.upperLimit}),a.push({name:"default",lowerLimit:t,upperLimit:void 0,columnsToHide:[]}),a.forEach(function(e){this.breakpoints[e.name]=e},this),this.tableElement.fnSettings().aoColumns.forEach(function(e,t){e.bVisible&&this.columnIndexes.push(t)},this),n=$("thead th",this.tableElement),_.each(n,function(e,t){var n,r;"expand"===$(e).attr("data-class")&&(this.expandColumn=t),$(e).addClass("column-"+["course","ucas","keyword","places"][t]),void 0!==(r=$(e).attr("data-hide"))&&(n=r.split(/,\s*/),_.each(n,function(e){void 0!==this.breakpoints[e]&&this.breakpoints[e].columnsToHide.push(this.columnIndexes[t])},this))},this),r=this,$(window).bind("resize",function(){r.respond()})},ResponsiveDatatablesHelper.prototype.respond=function(){if(!this.disabled){var e,t,n=$(window).width(),r=[];_.each(this.breakpoints,function(e){(!e.lowerLimit||n>e.lowerLimit)&&(!e.upperLimit||n<=e.upperLimit)&&(r=e.columnsToHide)},this),e=!1,this.skipNextWindowsWidthChange||(e=this.columnsHiddenIndexes.length!==r.length||_.difference(this.columnsHiddenIndexes,r).length+_.difference(r,this.columnsHiddenIndexes).length>0),e&&(this.skipNextWindowsWidthChange=!0,this.columnsHiddenIndexes=r,this.columnsShownIndexes=_.difference(this.columnIndexes,this.columnsHiddenIndexes),this.showHideColumns(),this.columnsHiddenIndexes.length,this.skipNextWindowsWidthChange=!1),this.columnsHiddenIndexes.length?(this.tableElement.addClass("has-columns-hidden"),t=this,$("tr.detail-show",this.tableElement).each(function(e,n){var r=$(n);0===r.next(".row-detail").length&&ResponsiveDatatablesHelper.prototype.showRowDetail(t,r)})):(this.tableElement.removeClass("has-columns-hidden"),$("tr.row-detail").remove())}},ResponsiveDatatablesHelper.prototype.showHideColumns=function(){this.columnsShownIndexes.forEach(function(e){this.tableElement.fnSetColumnVis(e,!0,!1)},this),this.columnsHiddenIndexes.forEach(function(e){this.tableElement.fnSetColumnVis(e,!1,!1)},this);var e=this;$("tr.row-detail").remove(),this.tableElement.hasClass("has-columns-hidden")&&$("tr.detail-show",this.tableElement).each(function(t,n){ResponsiveDatatablesHelper.prototype.showRowDetail(e,$(n))})},ResponsiveDatatablesHelper.prototype.createExpandIcon=function(e){if(!this.disabled){var t,n=$("td",e);void 0!==this.expandColumn&&this.expandColumn<n.length&&(t=$(n[this.expandColumn]),0===$("span.responsiveExpander",t).length&&(t.prepend(this.expandIconTemplate),t.on("click","span.responsiveExpander",{responsiveDatatablesHelperInstance:this},this.showRowDetailEventHandler)))}},ResponsiveDatatablesHelper.prototype.showRowDetailEventHandler=function(e){if(!this.disabled){var t=$(this).closest("tr");t.hasClass("detail-show")?ResponsiveDatatablesHelper.prototype.hideRowDetail(e.data.responsiveDatatablesHelperInstance,t):ResponsiveDatatablesHelper.prototype.showRowDetail(e.data.responsiveDatatablesHelperInstance,t),t.toggleClass("detail-show"),e.stopPropagation()}},ResponsiveDatatablesHelper.prototype.showRowDetail=function(e,t){var n,r,a,o=e.tableElement,i=o.fnSettings().aoColumns;n=$(e.rowTemplate),r=$("ul",n),_.each(e.columnsHiddenIndexes,function(n){var a=$(e.rowLiTemplate);$(".columnTitle",a).html(i[n].sTitle),a.append(o.fnGetData(t[0],n)),r.append(a)}),a=e.columnIndexes.length-e.columnsHiddenIndexes.length,$("td",n).attr("colspan",a),t.after(n)},ResponsiveDatatablesHelper.prototype.hideRowDetail=function(e,t){t.next(".row-detail").remove()},ResponsiveDatatablesHelper.prototype.disable=function(e){this.disabled=void 0===e||!0,this.disabled&&($("tbody tr.row-detail",this.tableElement).remove(),$("tbody tr",this.tableElement).removeClass("detail-show"),$("tbody tr span.responsiveExpander",this.tableElement).remove(),this.columnsHiddenIndexes=[],this.columnsShownIndexes=this.columnIndexes,this.showHideColumns(),this.tableElement.removeClass("has-columns-hidden"),this.tableElement.off("click","span.responsiveExpander",this.showRowDetailEventHandler))},function(e){function t(e,t,n){n=(n||0)-1;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function n(e,n){var r=typeof n;if(e=e.k,"boolean"==r||n==m)return e[n];"number"!=r&&"string"!=r&&(r="object");var a="number"==r?n:x+n;return e=e[r]||(e[r]={}),"object"==r?e[a]&&-1<t(e[a],n)?0:-1:e[a]?0:-1}function r(e){var t=this.k,n=typeof e;if("boolean"==n||e==m)t[e]=v;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:x+e,a=t[n]||(t[n]={});"object"==n?(a[r]||(a[r]=[])).push(e)==this.b.length&&(t[n]=b):a[r]=v}}function a(e){return e.charCodeAt(0)}function o(e,t){var n=e.m,r=t.m;if((e=e.l)!==(t=t.l)){if(e>t||void 0===e)return 1;if(e<t||void 0===t)return-1}return n<r?-1:1}function i(e){var t=-1,n=e.length,a=c();a.false=a.null=a.true=a.undefined=b;var o=c();for(o.b=e,o.k=a,o.push=r;++t<n;)o.push(e[t]);return!1===a.object?(f(o),m):o}function u(e){return"\\"+X[e]}function l(){return y.pop()||[]}function c(){return g.pop()||{b:m,k:m,l:m,false:b,m:0,leading:b,maxWait:0,null:b,number:m,object:m,push:m,string:m,trailing:b,true:b,undefined:b,n:m}}function s(e){e.length=0,y.length<C&&y.push(e)}function f(e){var t=e.k;t&&f(t),e.b=e.k=e.l=e.object=e.number=e.string=e.n=m,g.length<C&&g.push(e)}function p(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);var r=-1;n=n-t||0;for(var a=Array(0>n?0:n);++r<n;)a[r]=e[t+r];return a}function h(r){function y(e){if(!e||st.call(e)!=G)return b;var t=e.valueOf,n="function"==typeof t&&(n=ot(t))&&ot(n);return n?e==n||ot(e)==n:function(e){var t,n;return e&&st.call(e)==G&&(!fe(t=e.constructor)||t instanceof t)?(C(e,function(e,t){n=t}),n===d||it.call(e,n)):b}(e)}function g(e,t,n){if(!e||!U[typeof e])return e;t=t&&void 0===n?t:Z.createCallback(t,n);for(var r=-1,a=U[typeof e]&&jt(e),o=a?a.length:0;++r<o&&!1!==t(e[n=a[r]],n,e););return e}function C(e,t,n){var r;if(!e||!U[typeof e])return e;for(r in t=t&&void 0===n?t:Z.createCallback(t,n),e)if(!1===t(e[r],r,e))break;return e}function X(e,t,n){var r,a=e,o=a;if(!a)return o;for(var i=arguments,u=0,l="number"==typeof n?2:i.length;++u<l;)if((a=i[u])&&U[typeof a])for(var c=-1,s=U[typeof a]&&jt(a),f=s?s.length:0;++c<f;)void 0===o[r=s[c]]&&(o[r]=a[r]);return o}function J(e,t,n){var r,a=e,o=a;if(!a)return o;var i=arguments,u=0,l="number"==typeof n?2:i.length;if(3<l&&"function"==typeof i[l-2])var c=Z.createCallback(i[--l-1],i[l--],2);else 2<l&&"function"==typeof i[l-1]&&(c=i[--l]);for(;++u<l;)if((a=i[u])&&U[typeof a])for(var s=-1,f=U[typeof a]&&jt(a),p=f?f.length:0;++s<p;)o[r=f[s]]=c?c(o[r],a[r]):a[r];return o}function Z(e){return e&&"object"==typeof e&&!Ct(e)&&it.call(e,"__wrapped__")?e:new te(e)}function te(e){this.__wrapped__=e}function ne(e,t,n,r){var a=fe(e),o=!n,i=t;if(o){var u=r;n=t}else if(!a){if(!r)throw new Ue;t=e}return function r(){var l=arguments,c=o?this:t;return a||(e=t[i]),n.length&&(l=l.length?(l=wt.call(l),u?l.concat(n):n.concat(l)):n),this instanceof r?(c=pe(e.prototype)?pt(e.prototype):{},pe(l=e.apply(c,l))?l:c):e.apply(c,l)}}function re(e){return Et[e]}function ae(){var e=(e=Z.indexOf)===He?t:e;return e}function oe(e){return function(t,n,r,a){return"boolean"!=typeof n&&n!=m&&(r=(a=r)&&a[n]===t?d:n,n=b),r!=m&&(r=Z.createCallback(r,a)),e(t,n,r,a)}}function ie(e){return It[e]}function ue(e,t,n,r,a,o){var i=e;if("boolean"!=typeof t&&t!=m&&(r=n,n=t,t=b),"function"==typeof n){if(n=void 0===r?n:Z.createCallback(n,r,1),void 0!==(i=n(i)))return i;i=e}if(r=pe(i)){var u=st.call(i);if(!M[u])return i;var c=Ct(i)}if(!r||!t)return r?c?p(i):J({},i):i;switch(r=xt[u],u){case F:case P:return new r(+i);case V:case K:return new r(i);case Y:return r(i.source,$.exec(i))}u=!a,a||(a=l()),o||(o=l());for(var f=a.length;f--;)if(a[f]==e)return o[f];return i=c?r(i.length):{},c&&(it.call(e,"index")&&(i.index=e.index),it.call(e,"input")&&(i.input=e.input)),a.push(e),o.push(i),(c?_e:g)(e,function(e,r){i[r]=ue(e,t,n,d,a,o)}),u&&(s(a),s(o)),i}function le(e){var t=[];return C(e,function(e,n){fe(e)&&t.push(n)}),t.sort()}function ce(e){for(var t=-1,n=jt(e),r=n.length,a={};++t<r;){var o=n[t];a[e[o]]=o}return a}function se(e,t,n,r,a,o){var i=n===w;if("function"==typeof n&&!i&&(n=Z.createCallback(n,r,2),void 0!==(h=n(e,t))))return!!h;if(e===t)return 0!==e||1/e==1/t;var u=typeof e,c=typeof t;if(e==e&&(!e||"function"!=u&&"object"!=u)&&(!t||"function"!=c&&"object"!=c))return b;if(e==m||t==m)return e===t;if(c=st.call(e),u=st.call(t),c==B&&(c=G),u==B&&(u=G),c!=u)return b;switch(c){case F:case P:return+e==+t;case V:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case Y:case K:return e==Me(t)}if(!(u=c==q)){if(it.call(e,"__wrapped__")||it.call(t,"__wrapped__"))return se(e.__wrapped__||e,t.__wrapped__||t,n,r,a,o);if(c!=G)return b;c=e.constructor;var f=t.constructor;if(!(c==f||fe(c)&&c instanceof c&&fe(f)&&f instanceof f))return b}for(f=!a,a||(a=l()),o||(o=l()),c=a.length;c--;)if(a[c]==e)return o[c]==t;var p=0,h=v;if(a.push(e),o.push(t),u){if(c=e.length,p=t.length,!(h=p==e.length)&&!i)return h;for(;p--;)if(u=c,f=t[p],i)for(;u--&&!(h=se(e[u],f,n,r,a,o)););else if(!(h=se(e[p],f,n,r,a,o)))break;return h}return C(t,function(t,i,u){return it.call(u,i)?(p++,h=it.call(e,i)&&se(e[i],t,n,r,a,o)):void 0}),h&&!i&&C(e,function(e,t,n){return it.call(n,t)?h=-1<--p:void 0}),f&&(s(a),s(o)),h}function fe(e){return"function"==typeof e}function pe(e){return!(!e||!U[typeof e])}function he(e){return"number"==typeof e||st.call(e)==V}function de(e){return"string"==typeof e||st.call(e)==K}function ve(e){for(var t=-1,n=jt(e),r=n.length,a=qe(r);++t<r;)a[t]=e[n[t]];return a}function me(e,t,n){var r=-1,a=ae(),o=e?e.length:0,i=b;return n=(0>n?bt(0,o+n):n)||0,o&&"number"==typeof o?i=-1<(de(e)?e.indexOf(t,n):a(e,t,n)):g(e,function(e){return++r<n?void 0:!(i=e===t)}),i}function be(e,t,n){var r=v;t=Z.createCallback(t,n),n=-1;var a=e?e.length:0;if("number"==typeof a)for(;++n<a&&(r=!!t(e[n],n,e)););else g(e,function(e,n,a){return r=!!t(e,n,a)});return r}function ye(e,t,n){var r=[];t=Z.createCallback(t,n),n=-1;var a=e?e.length:0;if("number"==typeof a)for(;++n<a;){var o=e[n];t(o,n,e)&&r.push(o)}else g(e,function(e,n,a){t(e,n,a)&&r.push(e)});return r}function ge(e,t,n){t=Z.createCallback(t,n),n=-1;var r,a=e?e.length:0;if("number"!=typeof a)return g(e,function(e,n,a){return t(e,n,a)?(r=e,b):void 0}),r;for(;++n<a;){var o=e[n];if(t(o,n,e))return o}}function _e(e,t,n){var r=-1,a=e?e.length:0;if(t=t&&void 0===n?t:Z.createCallback(t,n),"number"==typeof a)for(;++r<a&&!1!==t(e[r],r,e););else g(e,t);return e}function we(e,t,n){var r=-1,a=e?e.length:0;if(t=Z.createCallback(t,n),"number"==typeof a)for(var o=qe(a);++r<a;)o[r]=t(e[r],r,e);else o=[],g(e,function(e,n,a){o[++r]=t(e,n,a)});return o}function xe(e,t,n){var r=-1/0,o=r;if(!t&&Ct(e)){n=-1;for(var i=e.length;++n<i;){var u=e[n];u>o&&(o=u)}}else t=!t&&de(e)?a:Z.createCallback(t,n),_e(e,function(e,n,a){(n=t(e,n,a))>r&&(r=n,o=e)});return o}function ke(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r)for(var a=qe(r);++n<r;)a[n]=e[n][t];return a||we(e,t)}function Ce(e,t,n,r){if(!e)return n;var a=3>arguments.length;t=Z.createCallback(t,r,4);var o=-1,i=e.length;if("number"==typeof i)for(a&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);else g(e,function(e,r,o){n=a?(a=b,e):t(n,e,r,o)});return n}function je(e,t,n,r){var a=e?e.length:0,o=3>arguments.length;if("number"!=typeof a){var i=jt(e);a=i.length}return t=Z.createCallback(t,r,4),_e(e,function(r,u,l){u=i?i[--a]:--a,n=o?(o=b,e[u]):t(n,e[u],u,l)}),n}function Ee(e,t,n){var r;t=Z.createCallback(t,n),n=-1;var a=e?e.length:0;if("number"==typeof a)for(;++n<a&&!(r=t(e[n],n,e)););else g(e,function(e,n,a){return!(r=t(e,n,a))});return!!r}function Ie(e){var r=-1,a=ae(),o=e?e.length:0,u=nt.apply(Xe,wt.call(arguments,1)),l=[],c=o>=k&&a===t;if(c){var s=i(u);s?(a=n,u=s):c=b}for(;++r<o;)0>a(u,s=e[r])&&l.push(s);return c&&f(u),l}function De(e,t,n){if(e){var r=0,a=e.length;if("number"!=typeof t&&t!=m){var o=-1;for(t=Z.createCallback(t,n);++o<a&&t(e[o],o,e);)r++}else if((r=t)==m||n)return e[0];return p(e,0,yt(bt(0,r),a))}}function He(e,n,r){if("number"==typeof r){var a=e?e.length:0;r=0>r?bt(0,a+r):r||0}else if(r)return e[r=Re(e,n)]===n?r:-1;return e?t(e,n,r):-1}function $e(e,t,n){if("number"!=typeof t&&t!=m){var r=0,a=-1,o=e?e.length:0;for(t=Z.createCallback(t,n);++a<o&&t(e[a],a,e);)r++}else r=t==m||n?1:bt(0,t);return p(e,r)}function Re(e,t,n,r){var a=0,o=e?e.length:a;for(t=(n=n?Z.createCallback(n,r,1):We)(t);a<o;)n(e[r=a+o>>>1])<t?a=r+1:o=r;return a}function Te(e){for(var t=-1,n=e?xe(ke(e,"length")):0,r=qe(0>n?0:n);++t<n;)r[t]=ke(e,t);return r}function Se(e,t){for(var n=-1,r=e?e.length:0,a={};++n<r;){var o=e[n];t?a[o]=t[n]:a[o[0]]=o[1]}return a}function Ne(e,t){return kt.fastBind||ft&&2<arguments.length?ft.call.apply(ft,arguments):ne(e,t,wt.call(arguments,2))}function Oe(e,t,n){function r(){tt(p),tt(h),c=0,p=h=m}function a(){var t=d&&(!y||1<c);r(),t&&(!1!==f&&(s=new Pe),u=e.apply(l,i))}function o(){r(),(d||f!==t)&&(s=new Pe,u=e.apply(l,i))}var i,u,l,c=0,s=0,f=b,p=m,h=m,d=v;if(t=bt(0,t||0),n===v){var y=v;d=b}else pe(n)&&(y=n.leading,f="maxWait"in n&&bt(t,n.maxWait||0),d="trailing"in n?n.trailing:d);return function(){if(i=arguments,l=this,c++,tt(h),!1===f)y&&2>c&&(u=e.apply(l,i));else{var n=new Pe;!p&&!y&&(s=n);var r=f-(n-s);0<r?p||(p=ct(o,r)):(tt(p),p=m,s=n,u=e.apply(l,i))}return t!==f&&(h=ct(a,t)),u}}function Ae(e){var t=wt.call(arguments,1);return ct(function(){e.apply(d,t)},1)}function We(e){return e}function Le(e){_e(le(e),function(t){var n=Z[t]=e[t];Z.prototype[t]=function(){var e=this.__wrapped__,t=[e];return ut.apply(t,arguments),t=n.apply(Z,t),e&&"object"==typeof e&&e===t?this:new te(t)}})}function Be(){return this.__wrapped__}var qe=(r=r?ee.defaults(e.Object(),r,ee.pick(e,L)):e).Array,Fe=r.Boolean,Pe=r.Date,ze=r.Function,Ve=r.Math,Ge=r.Number,Ye=r.Object,Ke=r.RegExp,Me=r.String,Ue=r.TypeError,Xe=[],Je=Ye.prototype,Qe=r._,Ze=Ke("^"+Me(Je.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),et=Ve.ceil,tt=r.clearTimeout,nt=Xe.concat,rt=Ve.floor,at=ze.prototype.toString,ot=Ze.test(ot=Ye.getPrototypeOf)&&ot,it=Je.hasOwnProperty,ut=Xe.push,lt=r.setImmediate,ct=r.setTimeout,st=Je.toString,ft=Ze.test(ft=st.bind)&&ft,pt=Ze.test(pt=Ye.create)&&pt,ht=Ze.test(ht=qe.isArray)&&ht,dt=r.isFinite,vt=r.isNaN,mt=Ze.test(mt=Ye.keys)&&mt,bt=Ve.max,yt=Ve.min,gt=r.parseInt,_t=Ve.random,wt=Xe.slice,xt=(Ve=Ze.test(r.attachEvent),Ve=ft&&!/\n|true/.test(ft+Ve),{});xt[q]=qe,xt[F]=Fe,xt[P]=Pe,xt[z]=ze,xt[G]=Ye,xt[V]=Ge,xt[Y]=Ke,xt[K]=Me,te.prototype=Z.prototype;var kt=Z.support={};kt.fastBind=ft&&!Ve,Z.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:R,variable:"",imports:{_:Z}};var Ct=ht,jt=mt?function(e){return pe(e)?mt(e):[]}:function(e){var t,n=[];if(!e||!U[typeof e])return n;for(t in e)it.call(e,t)&&n.push(t);return n},Et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},It=ce(Et),Dt=(Fe=oe(function e(t,n,r){for(var a=-1,o=t?t.length:0,i=[];++a<o;){var u=t[a];r&&(u=r(u,a,t)),Ct(u)?ut.apply(i,n?u:e(u)):i.push(u)}return i}),oe(function(e,r,a){var o=-1,u=ae(),c=e?e.length:0,p=[],h=!r&&c>=k&&u===t,d=a||h?l():p;h&&((v=i(d))?(u=n,d=v):(h=b,d=a?d:(s(d),p)));for(;++o<c;){var v=e[o],m=a?a(v,o,e):v;(r?!o||d[d.length-1]!==m:0>u(d,m))&&((a||h)&&d.push(m),p.push(v))}return h?(s(d.b),f(d)):a&&s(d),p}));return Ve&&Q&&"function"==typeof lt&&(Ae=Ne(lt,r)),lt=8==gt(S+"08")?gt:function(e,t){return gt(de(e)?e.replace(N,""):e,t||0)},Z.after=function(e,t){return 1>e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},Z.assign=J,Z.at=function(e){for(var t=-1,n=nt.apply(Xe,wt.call(arguments,1)),r=n.length,a=qe(r);++t<r;)a[t]=e[n[t]];return a},Z.bind=Ne,Z.bindAll=function(e){for(var t=1<arguments.length?nt.apply(Xe,wt.call(arguments,1)):le(e),n=-1,r=t.length;++n<r;){var a=t[n];e[a]=Ne(e[a],e)}return e},Z.bindKey=function(e,t){return ne(e,t,wt.call(arguments,2),w)},Z.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var a=e[t];a&&r.push(a)}return r},Z.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},Z.countBy=function(e,t,n){var r={};return t=Z.createCallback(t,n),_e(e,function(e,n,a){n=Me(t(e,n,a)),it.call(r,n)?r[n]++:r[n]=1}),r},Z.createCallback=function(e,t,n){if(e==m)return We;var r=typeof e;if("function"!=r){if("object"!=r)return function(t){return t[e]};var a=jt(e);return function(t){for(var n=a.length,r=b;n--&&(r=se(t[a[n]],e[a[n]],w)););return r}}return void 0===t||T&&!T.test(at.call(e))?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,a,o){return e.call(t,n,r,a,o)}:function(n,r,a){return e.call(t,n,r,a)}},Z.debounce=Oe,Z.defaults=X,Z.defer=Ae,Z.delay=function(e,t){var n=wt.call(arguments,2);return ct(function(){e.apply(d,n)},t)},Z.difference=Ie,Z.filter=ye,Z.flatten=Fe,Z.forEach=_e,Z.forIn=C,Z.forOwn=g,Z.functions=le,Z.groupBy=function(e,t,n){var r={};return t=Z.createCallback(t,n),_e(e,function(e,n,a){n=Me(t(e,n,a)),(it.call(r,n)?r[n]:r[n]=[]).push(e)}),r},Z.initial=function(e,t,n){if(!e)return[];var r=0,a=e.length;if("number"!=typeof t&&t!=m){var o=a;for(t=Z.createCallback(t,n);o--&&t(e[o],o,e);)r++}else r=t==m||n?1:t||r;return p(e,0,yt(bt(0,a-r),a))},Z.intersection=function(e){for(var r=arguments,a=r.length,o=-1,u=l(),c=-1,p=ae(),h=e?e.length:0,d=[],v=l();++o<a;){var m=r[o];u[o]=p===t&&(m?m.length:0)>=k&&i(o?r[o]:v)}e:for(;++c<h;){var b=u[0];m=e[c];if(0>(b?n(b,m):p(v,m))){for(o=a,(b||v).push(m);--o;)if(0>((b=u[o])?n(b,m):p(r[o],m)))continue e;d.push(m)}}for(;a--;)(b=u[a])&&f(b);return s(u),s(v),d},Z.invert=ce,Z.invoke=function(e,t){var n=wt.call(arguments,2),r=-1,a="function"==typeof t,o=e?e.length:0,i=qe("number"==typeof o?o:0);return _e(e,function(e){i[++r]=(a?t:e[t]).apply(e,n)}),i},Z.keys=jt,Z.map=we,Z.max=xe,Z.memoize=function(e,t){function n(){var r=n.cache,a=x+(t?t.apply(this,arguments):arguments[0]);return it.call(r,a)?r[a]:r[a]=e.apply(this,arguments)}return n.cache={},n},Z.merge=function e(t,n,r){var a=arguments,o=0,i=2;if(!pe(t))return t;if(r===w)var u=a[3],c=a[4],f=a[5];else{var p=v;c=l(),f=l(),"number"!=typeof r&&(i=a.length),3<i&&"function"==typeof a[i-2]?u=Z.createCallback(a[--i-1],a[i--],2):2<i&&"function"==typeof a[i-1]&&(u=a[--i])}for(;++o<i;)(Ct(a[o])?_e:g)(a[o],function(n,r){var a,o,i=n,l=t[r];if(n&&((o=Ct(n))||y(n))){for(i=c.length;i--;)if(a=c[i]==n){l=f[i];break}var s;a||(u&&(s=void 0!==(i=u(l,n)))&&(l=i),s||(l=o?Ct(l)?l:[]:y(l)?l:{}),c.push(n),f.push(l),s||(l=e(l,n,w,u,c,f)))}else u&&void 0===(i=u(l,n))&&(i=n),void 0!==i&&(l=i);t[r]=l});return p&&(s(c),s(f)),t},Z.min=function(e,t,n){var r=1/0,o=r;if(!t&&Ct(e)){n=-1;for(var i=e.length;++n<i;){var u=e[n];u<o&&(o=u)}}else t=!t&&de(e)?a:Z.createCallback(t,n),_e(e,function(e,n,a){(n=t(e,n,a))<r&&(r=n,o=e)});return o},Z.omit=function(e,t,n){var r=ae(),a="function"==typeof t,o={};if(a)t=Z.createCallback(t,n);else var i=nt.apply(Xe,wt.call(arguments,1));return C(e,function(e,n,u){(a?!t(e,n,u):0>r(i,n))&&(o[n]=e)}),o},Z.once=function(e){var t,n;return function(){return t?n:(t=v,n=e.apply(this,arguments),e=m,n)}},Z.pairs=function(e){for(var t=-1,n=jt(e),r=n.length,a=qe(r);++t<r;){var o=n[t];a[t]=[o,e[o]]}return a},Z.partial=function(e){return ne(e,wt.call(arguments,1))},Z.partialRight=function(e){return ne(e,wt.call(arguments,1),m,w)},Z.pick=function(e,t,n){var r={};if("function"!=typeof t)for(var a=-1,o=nt.apply(Xe,wt.call(arguments,1)),i=pe(e)?o.length:0;++a<i;){var u=o[a];u in e&&(r[u]=e[u])}else t=Z.createCallback(t,n),C(e,function(e,n,a){t(e,n,a)&&(r[n]=e)});return r},Z.pluck=ke,Z.range=function(e,t,n){e=+e||0,t==m&&(t=e,e=0);var r=-1;t=bt(0,et((t-e)/(n=+n||1)));for(var a=qe(t);++r<t;)a[r]=e,e+=n;return a},Z.reject=function(e,t,n){return t=Z.createCallback(t,n),ye(e,function(e,n,r){return!t(e,n,r)})},Z.rest=$e,Z.shuffle=function(e){var t=-1,n=e?e.length:0,r=qe("number"==typeof n?n:0);return _e(e,function(e){var n=rt(_t()*(++t+1));r[t]=r[n],r[n]=e}),r},Z.sortBy=function(e,t,n){var r=-1,a=e?e.length:0,i=qe("number"==typeof a?a:0);for(t=Z.createCallback(t,n),_e(e,function(e,n,a){var o=i[++r]=c();o.l=t(e,n,a),o.m=r,o.n=e}),a=i.length,i.sort(o);a--;)e=i[a],i[a]=e.n,f(e);return i},Z.tap=function(e,t){return t(e),e},Z.throttle=function(e,t,n){var r=v,a=v;return!1===n?r=b:pe(n)&&(r="leading"in n?n.leading:r,a="trailing"in n?n.trailing:a),(n=c()).leading=r,n.maxWait=t,n.trailing=a,e=Oe(e,t,n),f(n),e},Z.times=function(e,t,n){e=-1<(e=+e)?e:0;var r=-1,a=qe(e);for(t=Z.createCallback(t,n,1);++r<e;)a[r]=t(r);return a},Z.toArray=function(e){return e&&"number"==typeof e.length?p(e):ve(e)},Z.transform=function(e,t,n,r){var a=Ct(e);return t=Z.createCallback(t,r,4),n==m&&(a?n=[]:(r=e&&e.constructor,n=pe(r&&r.prototype)?pt(r&&r.prototype):{})),(a?_e:g)(e,function(e,r,a){return t(n,e,r,a)}),n},Z.union=function(e){return Ct(e)||(arguments[0]=e?wt.call(e):Xe),Dt(nt.apply(Xe,arguments))},Z.uniq=Dt,Z.unzip=Te,Z.values=ve,Z.where=ye,Z.without=function(e){return Ie(e,wt.call(arguments,1))},Z.wrap=function(e,t){return function(){var n=[e];return ut.apply(n,arguments),t.apply(this,n)}},Z.zip=function(e){return e?Te(arguments):[]},Z.zipObject=Se,Z.collect=we,Z.drop=$e,Z.each=_e,Z.extend=J,Z.methods=le,Z.object=Se,Z.select=ye,Z.tail=$e,Z.unique=Dt,Le(Z),Z.chain=Z,Z.prototype.chain=function(){return this},Z.clone=ue,Z.cloneDeep=function(e,t,n){return ue(e,v,t,n)},Z.contains=me,Z.escape=function(e){return e==m?"":Me(e).replace(A,re)},Z.every=be,Z.find=ge,Z.findIndex=function(e,t,n){var r=-1,a=e?e.length:0;for(t=Z.createCallback(t,n);++r<a;)if(t(e[r],r,e))return r;return-1},Z.findKey=function(e,t,n){var r;return t=Z.createCallback(t,n),g(e,function(e,n,a){return t(e,n,a)?(r=n,b):void 0}),r},Z.has=function(e,t){return e?it.call(e,t):b},Z.identity=We,Z.indexOf=He,Z.isArguments=function(e){return st.call(e)==B},Z.isArray=Ct,Z.isBoolean=function(e){return e===v||!1===e||st.call(e)==F},Z.isDate=function(e){return e?"object"==typeof e&&st.call(e)==P:b},Z.isElement=function(e){return e?1===e.nodeType:b},Z.isEmpty=function(e){var t=v;if(!e)return t;var n=st.call(e),r=e.length;return n==q||n==K||n==B||n==G&&"number"==typeof r&&fe(e.splice)?!r:(g(e,function(){return t=b}),t)},Z.isEqual=se,Z.isFinite=function(e){return dt(e)&&!vt(parseFloat(e))},Z.isFunction=fe,Z.isNaN=function(e){return he(e)&&e!=+e},Z.isNull=function(e){return e===m},Z.isNumber=he,Z.isObject=pe,Z.isPlainObject=y,Z.isRegExp=function(e){return e?"object"==typeof e&&st.call(e)==Y:b},Z.isString=de,Z.isUndefined=function(e){return void 0===e},Z.lastIndexOf=function(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?bt(0,r+n):yt(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},Z.mixin=Le,Z.noConflict=function(){return r._=Qe,this},Z.parseInt=lt,Z.random=function(e,t){e==m&&t==m&&(t=1),e=+e||0,t==m?(t=e,e=0):t=+t||0;var n=_t();return e%1||t%1?e+yt(n*(t-e+parseFloat("1e-"+((n+"").length-1))),t):e+rt(n*(t-e+1))},Z.reduce=Ce,Z.reduceRight=je,Z.result=function(e,t){var n=e?e[t]:d;return fe(n)?e[t]():n},Z.runInContext=h,Z.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:jt(e).length},Z.some=Ee,Z.sortedIndex=Re,Z.template=function(e,t,n){var r=Z.templateSettings;e||(e=""),n=X({},n,r);var a,o=X({},n.imports,r.imports),i=(r=jt(o),o=ve(o),0),l=n.interpolate||O,c="__p+='";l=Ke((n.escape||O).source+"|"+l.source+"|"+(l===R?H:O).source+"|"+(n.evaluate||O).source+"|$","g");e.replace(l,function(t,n,r,o,l,s){return r||(r=o),c+=e.slice(i,s).replace(W,u),n&&(c+="'+__e("+n+")+'"),l&&(a=v,c+="';"+l+";__p+='"),r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),i=s+t.length,t}),c+="';\n",(l=n=n.variable)||(c="with("+(n="obj")+"){"+c+"}"),c=(a?c.replace(j,""):c).replace(E,"$1").replace(I,"$1;"),c="function("+n+"){"+(l?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}";try{var s=ze(r,"return "+c).apply(d,o)}catch(e){throw e.source=c,e}return t?s(t):(s.source=c,s)},Z.unescape=function(e){return e==m?"":Me(e).replace(D,ie)},Z.uniqueId=function(e){var t=++_;return Me(e==m?"":e)+t},Z.all=be,Z.any=Ee,Z.detect=ge,Z.findWhere=ge,Z.foldl=Ce,Z.foldr=je,Z.include=me,Z.inject=Ce,g(Z,function(e,t){Z.prototype[t]||(Z.prototype[t]=function(){var t=[this.__wrapped__];return ut.apply(t,arguments),e.apply(Z,t)})}),Z.first=De,Z.last=function(e,t,n){if(e){var r=0,a=e.length;if("number"!=typeof t&&t!=m){var o=a;for(t=Z.createCallback(t,n);o--&&t(e[o],o,e);)r++}else if((r=t)==m||n)return e[a-1];return p(e,bt(0,a-r))}},Z.take=De,Z.head=De,g(Z,function(e,t){Z.prototype[t]||(Z.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return t==m||n&&"function"!=typeof t?r:new te(r)})}),Z.VERSION="1.3.1",Z.prototype.toString=function(){return Me(this.__wrapped__)},Z.prototype.value=Be,Z.prototype.valueOf=Be,_e(["join","pop","shift"],function(e){var t=Xe[e];Z.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),_e(["push","reverse","sort","unshift"],function(e){var t=Xe[e];Z.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),_e(["concat","slice","splice"],function(e){var t=Xe[e];Z.prototype[e]=function(){return new te(t.apply(this.__wrapped__,arguments))}}),Z}var d,v=!0,m=null,b=!1,y=[],g=[],_=0,w={},x=+new Date+"",k=75,C=40,j=/\b__p\+='';/g,E=/\b(__p\+=)''\+/g,I=/(__e\(.*?\)|\b__t\))\+'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,H=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$=/\w*$/,R=/<%=([\s\S]+?)%>/g,T=(T=/\bthis\b/)&&T.test(h)&&T,S=" \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　",N=RegExp("^["+S+"]*0+(?=.$)"),O=/($^)/,A=/[&<>"']/g,W=/['\n\r\t\u2028\u2029\\]/g,L="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),B="[object Arguments]",q="[object Array]",F="[object Boolean]",P="[object Date]",z="[object Function]",V="[object Number]",G="[object Object]",Y="[object RegExp]",K="[object String]",M={};M[z]=b,M[B]=M[q]=M[F]=M[P]=M[V]=M[G]=M[Y]=M[K]=v;var U={boolean:b,function:v,object:v,number:b,string:b,undefined:b},X={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},J=U[typeof exports]&&exports,Q=U[typeof module]&&module&&module.exports==J&&module,Z=U[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(e=Z);var ee=h();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e._=ee,define(function(){return ee})):J&&!J.nodeType?Q?(Q.exports=ee)._=ee:J._=ee:e._=ee}(this);