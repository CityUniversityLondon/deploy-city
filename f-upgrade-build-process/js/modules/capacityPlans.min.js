CITY.capacityPlans=function(){var e=$(".highcharts#capacityPlans"),t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=(new Date).getMonth(),n=(new Date).getFullYear(),r=n+1,s=[],i=12,o=[],c=[],l=[],p=function(e,t,i){l=[],o=[],c=[],$.each(e,function(e,t){!function(e,t){if(parseInt(t.endyear,10)>n){var r=parseInt(t.enddate,10);r+=12,t.enddate=r}parseInt(t.endyear,10)>=n&&parseInt(t.enddate,10)>=a&&parseInt(t.endyear,10)>=n&&(o.push(t.title),c.push(t.barcolor),parseInt(t.startyear,10)>n?l.push([parseInt(t.startdate-a+12,10),parseInt(t.enddate-a,10)]):parseInt(t.startyear,10)<n?l.push([parseInt(t.startdate-a-12,10),parseInt(t.enddate-a,10)]):l.push([parseInt(t.startdate-a,10),parseInt(t.enddate-a,10)]))}(0,t)}),new Highcharts.Chart({chart:{renderTo:t,type:"columnrange",inverted:!0},title:{text:i+": 12 Month Outlook"},subtitle:{text:n+" - "+r},xAxis:{categories:o,showLastLabel:!0,endOnTick:!0,offset:50},yAxis:{showFirstLabel:!1,allowDecimals:!1,min:-1,max:11,categories:s,title:{text:"Months"},labels:{staggerLines:3,overflow:"justify"}},plotOptions:{series:{colorByPoint:!0,colors:c}},legend:{enabled:!1},series:[{data:l}],tooltip:{enabled:!1}})};!function(){for(var e=0;e<i;e++)e>11-a&&(i-=e,e=0-a),s.push(t[a+e])}(),$.each(e,function(e,t){var a=$(this).attr("title"),n="[";$.each($(t).find("span.highcharts"),function(e,t){n+=$(t).text()}),n+="]",n=jQuery.parseJSON(n),p(n,t,a)})}(CITY.debug);